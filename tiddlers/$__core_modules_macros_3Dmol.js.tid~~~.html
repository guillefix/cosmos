<p>created: 20160901105912827
modified: 20160901113823814
module-type: macro
tags: 
title: <a class="tc-tiddlylink tc-tiddlylink-resolves" href="#%24%3A%2Fcore%2Fmodules%2Fmacros%2F3Dmol">$:/core/modules/macros/3Dmol</a>
type: application/javascript</p><p>/*\
title: <a class="tc-tiddlylink tc-tiddlylink-resolves" href="#%24%3A%2Fcore%2Fmodules%2Fmacros%2F3Dmol">$:/core/modules/macros/3Dmol</a>
type: application/javascript
module-type: macro
Macro to return a formatted version of the current time
\*/
(function(){</p><p>/*jslint node: true, browser: true */
/*global $tw: false */
&quot;use strict&quot;;</p><p>/*
Information about this macro
*/</p><p>exports.name = &quot;3Dmol&quot;;</p><p>exports.params = [
	{name: &quot;mol&quot;}
];</p><p>/*
Run the macro
*/
exports.run = function(mol) {</p><p><em> Assume there exists an HTML div with id &quot;gldiv&quot;
var element = $('<div data-backgroundcolor="0xffffff" data-style="stick" style="height: 400px; width: 400px; position: relative;"></div>');

</em> Viewer config - properties 'defaultcolors' and 'callback'
var config = {defaultcolors: $3Dmol.rasmolElementColors };</p><p><em> Create GLViewer within 'gldiv' 
var myviewer = $3Dmol.createViewer(element, config);
</em>'data' is a string containing molecule data in pdb format  
<em>myviewer.addModel(data, &quot;pdb&quot;);
</em>myviewer.zoomTo();
<em>myviewer.render();                        
                       
</em> GLModel 'm' created and loaded into glviewer for PDB id 2POR
<em> Note that m will not contain the atomic data until after the network request is completed
var m = $3Dmol.download('pdb:'+mol, myviewer, {format:'cif'});

console.log(m)

	return $('<div>').append(element).remove().html();
<em>return mol
</em>$tw.utils.formatDateString(new Date(),format || &quot;0hh:0mm, DDth MMM YYYY&quot;);
};

})();
</div></em></p>